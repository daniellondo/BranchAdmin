{"ast":null,"code":"import { ElementRef } from \"@angular/core\";\nimport { DataService } from \"./services/data.service\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { MatDialog } from \"@angular/material/dialog\";\nimport { MatPaginator } from \"@angular/material/paginator\";\nimport { MatSort } from \"@angular/material/sort\";\nimport { DataSource } from \"@angular/cdk/collections\";\nimport { AddDialogComponent } from \"./dialogs/add/add.dialog.component\";\nimport { EditDialogComponent } from \"./dialogs/edit/edit.dialog.component\";\nimport { DeleteDialogComponent } from \"./dialogs/delete/delete.dialog.component\";\nimport { BehaviorSubject, fromEvent, merge } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { Branch } from \"./models/branch\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"./services/data.service\";\nimport * as i4 from \"@angular/material/toolbar\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/table\";\nimport * as i10 from \"@angular/material/sort\";\nimport * as i11 from \"@angular/material/paginator\";\nconst _c0 = [\"filter\"];\n\nfunction AppComponent_mat_header_cell_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 26);\n    i0.ɵɵtext(1, \"Branch Id\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_mat_cell_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r21.branchId);\n  }\n}\n\nfunction AppComponent_mat_header_cell_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 26);\n    i0.ɵɵtext(1, \"Code\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_mat_cell_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r22.code, \"\");\n  }\n}\n\nfunction AppComponent_mat_header_cell_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 26);\n    i0.ɵɵtext(1, \"Description\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_mat_cell_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r23.description, \"\");\n  }\n}\n\nfunction AppComponent_mat_header_cell_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 26);\n    i0.ɵɵtext(1, \"Address\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_mat_cell_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r24.address, \"\");\n  }\n}\n\nfunction AppComponent_mat_header_cell_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 26);\n    i0.ɵɵtext(1, \"Identification\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_mat_cell_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r25 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r25.identification, \"\");\n  }\n}\n\nfunction AppComponent_mat_header_cell_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 26);\n    i0.ɵɵtext(1, \"Create Date\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_mat_cell_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r26 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r26.createDate, \"\");\n  }\n}\n\nfunction AppComponent_mat_header_cell_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 26);\n    i0.ɵɵtext(1, \"Currency\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_mat_cell_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r27 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r27.currency, \"\");\n  }\n}\n\nfunction AppComponent_mat_header_cell_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵelementStart(1, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_header_cell_37_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.addNew();\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\", 28);\n    i0.ɵɵtext(3, \"add\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_mat_cell_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵelementStart(1, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_cell_38_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r33);\n      const row_r30 = restoredCtx.$implicit;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return ctx_r32.startEdit(row_r30.branchId, row_r30.code, row_r30.description, row_r30.address, row_r30.identification, row_r30.createDate, row_r30.currency);\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\", 30);\n    i0.ɵɵtext(3, \"edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_cell_38_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r33);\n      const row_r30 = restoredCtx.$implicit;\n      const ctx_r34 = i0.ɵɵnextContext();\n      return ctx_r34.deleteItem(row_r30.branchId, row_r30.code, row_r30.description, row_r30.address, row_r30.identification, row_r30.createDate, row_r30.currency);\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\", 31);\n    i0.ɵɵtext(6, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_mat_header_row_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\");\n  }\n}\n\nfunction AppComponent_mat_row_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\");\n  }\n}\n\nconst _c1 = function () {\n  return [5, 10, 25, 100];\n};\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(httpClient, dialog, dataService) {\n      this.httpClient = httpClient;\n      this.dialog = dialog;\n      this.dataService = dataService;\n      this.displayedColumns = [\"Code\", \"Address\", \"Identification\", \"CreationDate\", \"Currency\", \"Actions\"];\n    }\n\n    ngOnInit() {\n      this.loadData();\n    }\n\n    refresh() {\n      this.loadData();\n    }\n\n    addNew() {\n      const dialogRef = this.dialog.open(AddDialogComponent, {\n        data: {\n          branch: Branch\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result === 1) {\n          // After dialog is closed we're doing frontend updates\n          // For add we're just pushing a new row inside DataService\n          this.exampleDatabase.dataChange.value.push(this.dataService.getDialogData());\n          this.refreshTable();\n        }\n      });\n    }\n\n    startEdit(branchId, code, description, address, identification, createDate, currency) {\n      this.branchId = branchId;\n      const dialogRef = this.dialog.open(EditDialogComponent, {\n        data: {\n          branchId: branchId,\n          code: code,\n          description: description,\n          address: address,\n          identification: identification,\n          createDate: createDate,\n          currency: currency\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result === 1 && this.exampleDatabase) {\n          const foundIndex = this.exampleDatabase.dataChange.value.findIndex(x => x.branchId === this.branchId);\n          this.exampleDatabase.dataChange.value[foundIndex] = this.dataService.getDialogData();\n          this.refreshTable();\n        }\n      });\n    }\n\n    deleteItem(i, id, title, state, url) {\n      this.index = i;\n      this.id = id;\n      const dialogRef = this.dialog.open(DeleteDialogComponent, {\n        data: {\n          id: id,\n          title: title,\n          state: state,\n          url: url\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result === 1) {\n          const foundIndex = this.exampleDatabase.dataChange.value.findIndex(x => x.id === this.id); // for delete we use splice in order to remove single object from DataService\n\n          this.exampleDatabase.dataChange.value.splice(foundIndex, 1);\n          this.refreshTable();\n        }\n      });\n    }\n\n    refreshTable() {\n      // Refreshing table using paginator\n      // Thanks yeager-j for tips\n      // https://github.com/marinantonio/angular-mat-table-crud/branchs/12\n      this.paginator._changePageSize(this.paginator.pageSize);\n    }\n    /*   // If you don't need a filter or a pagination this can be simplified, you just use code from else block\r\n      // OLD METHOD:\r\n      // if there's a paginator active we're using it for refresh\r\n      if (this.dataSource._paginator.hasNextPage()) {\r\n        this.dataSource._paginator.nextPage();\r\n        this.dataSource._paginator.previousPage();\r\n        // in case we're on last page this if will tick\r\n      } else if (this.dataSource._paginator.hasPreviousPage()) {\r\n        this.dataSource._paginator.previousPage();\r\n        this.dataSource._paginator.nextPage();\r\n        // in all other cases including active filter we do it like this\r\n      } else {\r\n        this.dataSource.filter = '';\r\n        this.dataSource.filter = this.filter.nativeElement.value;\r\n      }*/\n\n\n    loadData() {\n      this.exampleDatabase = new DataService(this.httpClient);\n      this.dataSource = new ExampleDataSource(this.exampleDatabase, this.paginator, this.sort);\n      fromEvent(this.filter.nativeElement, \"keyup\") // .debounceTime(150)\n      // .distinctUntilChanged()\n      .subscribe(() => {\n        if (!this.dataSource) {\n          return;\n        }\n\n        this.dataSource.filter = this.filter.nativeElement.value;\n      });\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.DataService));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    viewQuery: function AppComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 7);\n        i0.ɵɵviewQuery(MatSort, 7);\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.filter = _t.first);\n      }\n    },\n    decls: 45,\n    vars: 10,\n    consts: [[\"color\", \"primary\"], [1, \"spacer\"], [\"mat-icon-button\", \"\", 3, \"click\"], [1, \"container\", \"mat-elevation-z8\"], [1, \"form\"], [\"floatPlaceholder\", \"never\", \"color\", \"accent\"], [\"matInput\", \"\", \"placeholder\", \"Filter issues\"], [\"filter\", \"\"], [\"matSort\", \"\", 1, \"mat-cell\", 3, \"dataSource\"], [\"table\", \"\"], [\"matColumnDef\", \"branchId\"], [\"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [4, \"matCellDef\"], [\"matColumnDef\", \"Code\"], [\"matColumnDef\", \"Description\"], [\"matColumnDef\", \"Address\"], [\"matColumnDef\", \"Identification\"], [\"matColumnDef\", \"CreationDate\"], [\"matColumnDef\", \"Currency\"], [\"matColumnDef\", \"Actions\"], [4, \"matHeaderCellDef\"], [4, \"matHeaderRowDef\"], [4, \"matRowDef\", \"matRowDefColumns\"], [1, \"no-results\"], [3, \"length\", \"pageIndex\", \"pageSize\", \"pageSizeOptions\"], [\"paginator\", \"\"], [\"mat-sort-header\", \"\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"aria-label\", \"Example icon-button with a heart icon\"], [\"mat-icon-button\", \"\", \"color\", \"accent\", 3, \"click\"], [\"aria-label\", \"Edit\"], [\"aria-label\", \"Delete\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-toolbar\", 0);\n        i0.ɵɵelementStart(1, \"span\");\n        i0.ɵɵtext(2, \"Angular 13 MatTable CRUD Example\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"span\", 1);\n        i0.ɵɵtext(4, \" Reload data: \");\n        i0.ɵɵelementStart(5, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_5_listener() {\n          return ctx.refresh();\n        });\n        i0.ɵɵelementStart(6, \"mat-icon\");\n        i0.ɵɵtext(7, \"refresh\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 3);\n        i0.ɵɵelementStart(9, \"div\", 4);\n        i0.ɵɵelementStart(10, \"mat-form-field\", 5);\n        i0.ɵɵelement(11, \"input\", 6, 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"mat-table\", 8, 9);\n        i0.ɵɵelementContainerStart(15, 10);\n        i0.ɵɵtemplate(16, AppComponent_mat_header_cell_16_Template, 2, 0, \"mat-header-cell\", 11);\n        i0.ɵɵtemplate(17, AppComponent_mat_cell_17_Template, 2, 1, \"mat-cell\", 12);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(18, 13);\n        i0.ɵɵtemplate(19, AppComponent_mat_header_cell_19_Template, 2, 0, \"mat-header-cell\", 11);\n        i0.ɵɵtemplate(20, AppComponent_mat_cell_20_Template, 2, 1, \"mat-cell\", 12);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(21, 14);\n        i0.ɵɵtemplate(22, AppComponent_mat_header_cell_22_Template, 2, 0, \"mat-header-cell\", 11);\n        i0.ɵɵtemplate(23, AppComponent_mat_cell_23_Template, 2, 1, \"mat-cell\", 12);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(24, 15);\n        i0.ɵɵtemplate(25, AppComponent_mat_header_cell_25_Template, 2, 0, \"mat-header-cell\", 11);\n        i0.ɵɵtemplate(26, AppComponent_mat_cell_26_Template, 2, 1, \"mat-cell\", 12);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(27, 16);\n        i0.ɵɵtemplate(28, AppComponent_mat_header_cell_28_Template, 2, 0, \"mat-header-cell\", 11);\n        i0.ɵɵtemplate(29, AppComponent_mat_cell_29_Template, 2, 1, \"mat-cell\", 12);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(30, 17);\n        i0.ɵɵtemplate(31, AppComponent_mat_header_cell_31_Template, 2, 0, \"mat-header-cell\", 11);\n        i0.ɵɵtemplate(32, AppComponent_mat_cell_32_Template, 2, 1, \"mat-cell\", 12);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(33, 18);\n        i0.ɵɵtemplate(34, AppComponent_mat_header_cell_34_Template, 2, 0, \"mat-header-cell\", 11);\n        i0.ɵɵtemplate(35, AppComponent_mat_cell_35_Template, 2, 1, \"mat-cell\", 12);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(36, 19);\n        i0.ɵɵtemplate(37, AppComponent_mat_header_cell_37_Template, 4, 0, \"mat-header-cell\", 20);\n        i0.ɵɵtemplate(38, AppComponent_mat_cell_38_Template, 7, 0, \"mat-cell\", 12);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(39, AppComponent_mat_header_row_39_Template, 1, 0, \"mat-header-row\", 21);\n        i0.ɵɵtemplate(40, AppComponent_mat_row_40_Template, 1, 0, \"mat-row\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"div\", 23);\n        i0.ɵɵtext(42, \" No results \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"mat-paginator\", 24, 25);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(26);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"display\", ctx.dataSource.renderedData.length == 0 ? \"\" : \"none\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"length\", ctx.dataSource.filteredData.length)(\"pageIndex\", 0)(\"pageSize\", 10)(\"pageSizeOptions\", i0.ɵɵpureFunction0(9, _c1));\n      }\n    },\n    directives: [i4.MatToolbar, i5.MatButton, i6.MatIcon, i7.MatFormField, i8.MatInput, i9.MatTable, i10.MatSort, i9.MatColumnDef, i9.MatHeaderCellDef, i9.MatHeaderCell, i10.MatSortHeader, i9.MatCellDef, i9.MatCell, i9.MatHeaderRowDef, i9.MatHeaderRow, i9.MatRowDef, i9.MatRow, i11.MatPaginator],\n    styles: [\".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.form[_ngcontent-%COMP%]{min-height:56px;max-height:56px;display:flex;align-items:center;padding:8px 24px 0;font-size:20px;justify-content:space-between;border-bottom:1px solid transparent}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;flex-grow:1;margin-top:8px}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:14px;font-size:14px;font-style:italic}.mat-cell[_ngcontent-%COMP%]:nth-child(1), .mat-header-cell[_ngcontent-%COMP%]:nth-child(1){flex:0 0 6%}.mat-cell[_ngcontent-%COMP%]:nth-child(2), .mat-header-cell[_ngcontent-%COMP%]:nth-child(2){flex:0 0 30%}.mat-cell[_ngcontent-%COMP%]:nth-child(3), .mat-header-cell[_ngcontent-%COMP%]:nth-child(3){flex:0 0 6%}.mat-cell[_ngcontent-%COMP%]:nth-child(7), .mat-header-cell[_ngcontent-%COMP%]:nth-child(7){flex:0 0 7%}\"]\n  });\n  return AppComponent;\n})();\nexport class ExampleDataSource extends DataSource {\n  constructor(_exampleDatabase, _paginator, _sort) {\n    super();\n    this._exampleDatabase = _exampleDatabase;\n    this._paginator = _paginator;\n    this._sort = _sort;\n    this._filterChange = new BehaviorSubject(\"\");\n    this.filteredData = [];\n    this.renderedData = []; // Reset to the first page when the user changes the filter.\n\n    this._filterChange.subscribe(() => this._paginator.pageIndex = 0);\n  }\n\n  get filter() {\n    return this._filterChange.value;\n  }\n\n  set filter(filter) {\n    this._filterChange.next(filter);\n  }\n  /** Connect function called by the table to retrieve one stream containing the data to render. */\n\n\n  connect() {\n    // Listen for any changes in the base data, sorting, filtering, or pagination\n    const displayDataChanges = [this._exampleDatabase.dataChange, this._sort.sortChange, this._filterChange, this._paginator.page];\n\n    this._exampleDatabase.getAllBranchs();\n\n    return merge(...displayDataChanges).pipe(map(() => {\n      // Filter data\n      this.filteredData = this._exampleDatabase.data.slice().filter(branch => {\n        const searchStr = (branch.id + branch.title + branch.url + branch.created_at).toLowerCase();\n        return searchStr.indexOf(this.filter.toLowerCase()) !== -1;\n      }); // Sort filtered data\n\n      const sortedData = this.sortData(this.filteredData.slice()); // Grab the page's slice of the filtered sorted data.\n\n      const startIndex = this._paginator.pageIndex * this._paginator.pageSize;\n      this.renderedData = sortedData.splice(startIndex, this._paginator.pageSize);\n      return this.renderedData;\n    }));\n  }\n\n  disconnect() {}\n  /** Returns a sorted copy of the database data. */\n\n\n  sortData(data) {\n    if (!this._sort.active || this._sort.direction === \"\") {\n      return data;\n    }\n\n    return data.sort((a, b) => {\n      let propertyA = \"\";\n      let propertyB = \"\";\n\n      switch (this._sort.active) {\n        case \"id\":\n          [propertyA, propertyB] = [a.id, b.id];\n          break;\n\n        case \"title\":\n          [propertyA, propertyB] = [a.title, b.title];\n          break;\n\n        case \"state\":\n          [propertyA, propertyB] = [a.state, b.state];\n          break;\n\n        case \"url\":\n          [propertyA, propertyB] = [a.url, b.url];\n          break;\n\n        case \"created_at\":\n          [propertyA, propertyB] = [a.created_at, b.created_at];\n          break;\n\n        case \"updated_at\":\n          [propertyA, propertyB] = [a.updated_at, b.updated_at];\n          break;\n      }\n\n      const valueA = isNaN(+propertyA) ? propertyA : +propertyA;\n      const valueB = isNaN(+propertyB) ? propertyB : +propertyB;\n      return (valueA < valueB ? -1 : 1) * (this._sort.direction === \"asc\" ? 1 : -1);\n    });\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}